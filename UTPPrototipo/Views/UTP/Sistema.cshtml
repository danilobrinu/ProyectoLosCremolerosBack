@{
    Layout = "~/Views/UTP/_LayoutUTP.cshtml";
    ViewBag.Title = "Sistema";
}
<link href="~/Content/font-awesome.css" rel="stylesheet" />

<div class="container" style="margin-top:2px;">


    <div id="divListaUsuariosUTP">
        @Html.Action("_UsuariosUTPLista", "UTP")
    </div>
        <hr />


    @* CARGA LAS LISTAS DE VALOR *@
        <div id="divListaPadre">
            @Html.Action("_ListavalorPadre", "UTP")
        </div>

        <hr />
    </div>


<script>
    $(document).ready(function () {
        $("#divFinalCabecera").removeClass("color-paleta1 color-paleta2 color-paleta3 color-paleta4 color-paleta5 color-paleta6 color-paleta7").addClass("color-paleta8");
    });
</script>

<!--Modal para crear usuario-->>
<div class="modal" id="divModalUsuarioUTPCrear" role="dialog" aria-labelledby="Nuevo Usuario" aria-hidden="true">

    @using (Ajax.BeginForm("_UsuariosUTPCrear", "UTP", new AjaxOptions() { InsertionMode = InsertionMode.Replace, HttpMethod = "POST", UpdateTargetId = "divListaUsuariosUTP", OnComplete = "cerrarModal" }))
    {
        @Html.AntiForgeryToken()

        <div class="modal-dialog" id="divContenedorUsuarioUTPCrear">

        </div>
    }

</div>


<!--Modal para editar usuario-->>
<div class="modal fade" id="divModalUsuarioUTPEditar" role="dialog" aria-labelledby="Nuevo Usuario" aria-hidden="true">

    @using (Ajax.BeginForm("_UsuariosUTPEditar", "UTP", new AjaxOptions() { InsertionMode = InsertionMode.Replace, HttpMethod = "POST", UpdateTargetId = "divListaUsuariosUTP", OnComplete = "cerrarModal" }))
    {
        @Html.AntiForgeryToken()

        <div class="modal-dialog" id="divContenedorUsuarioUTPEditar">

        </div>
    }

</div>


<div class="modal fade" id="Nueva-lista" role="dialog" aria-labelledby="Nueva Lista" aria-hidden="true">
    <div class="modal-dialog">
                
        @using (Ajax.BeginForm("_ListaValorPadreInsertar", "UTP", new AjaxOptions() { InsertionMode = InsertionMode.Replace, HttpMethod = "POST", UpdateTargetId = "divListaPadre", OnComplete = "cerrarModal" }))
        {
            @Html.AntiForgeryToken()

            <div class="modal-dialog" id="divContenedorListavalorPAdreCrear">

            </div>
        }

    </div>
</div>


@*<div class="modal fade" id="Nueva-lista" role="dialog" aria-labelledby="Nueva Lista" aria-hidden="true">
    <div class="modal-dialog">*@



        @*<div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="myModalLabel">Nueva Lista</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="input-group">
                                <span class="input-group-addon">Nombre</span>
                                <input type="text" class="form-control" placeholder="Nombre de Lista">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="input-group">
                                <span class="input-group-addon">Descrip-<br />ción</span>
                                <textarea class="form-control" rows="4">Descripción</textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="input-group">
                                <span class="input-group-addon"><input type="checkbox"></span>
                                <span class="form-control">Modificable</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default color-paleta8">Guardar</button>
                </div>
            </div>*@



    @*</div>
</div>*@




<script>

    function UsuarioUTPCrear() {
        //debugger;
        var url = "/UTP/_UsuariosUTPCrear"; //
        $.get(url, function (data) {
            //alert(data);
            $('#divContenedorUsuarioUTPCrear').html(data);
            $.validator.unobtrusive.parse('#divContenedorUsuarioUTPCrear');

            $('#divModalUsuarioUTPCrear').modal('show');

        }).error(function (err) {
            console.log(err);
            alert(err);
        });
    }

    function UsuarioUTPEditar(id) {
        var url = "/UTP/_UsuariosUTPEditar/" + id;
        $.get(url, function (data) {
            $('#divContenedorUsuarioUTPEditar').html(data);
            $.validator.unobtrusive.parse('#divContenedorUsuarioUTPEditar');

            $('#divModalUsuarioUTPEditar').modal('show');
        });
    }

    function ListaValorPadreInsertar() {

        //console.log('punto de control');
        var url = "/UTP/_ListaValorPadreInsertar/";
        $.get(url, function (data) {

            console.log(data);

            $('#divContenedorListavalorPAdreCrear').html(data);
            $.validator.unobtrusive.parse('#divContenedorListavalorPAdreCrear');

            $('#Nueva-lista').modal('show');
        }).error(function (err) {
            console.log(err);
            alert(err);
        });
      
    }


    function cerrarModal() {

        //alert('cerrarmodal');
        //$('#divListaPadre').html('demo');
        $('.modal.in').modal('hide');
    }

</script>