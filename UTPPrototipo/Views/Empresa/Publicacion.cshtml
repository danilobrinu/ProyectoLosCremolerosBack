@model IEnumerable<UTP.PortalEmpleabilidad.Modelo.Vistas.Ofertas.VistaOfertaEmpresa>
@using UTPPrototipo.Models.ViewModels.Cuenta;
@using UTPPrototipo.Common

@{
    Layout = "~/Views/Empresa/_LayoutEmpresa.cshtml";
    ViewBag.Title = "Publicaciones";
    TicketEmpresa ticketEmpresa = (TicketEmpresa)Session["TicketEmpresa"];
}

<div class="container" style="margin-top:2px;">

    @{Html.RenderAction("VistaCabecera", "Empresa");}

    <div class="panel-group" id="CriterioBusquedaPostulacion" role="tablist" aria-multiselectable="true">
        <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="CabeceraColapsaBusqueda" style="padding: 2px 2px 2px 6px;">
                <h5 class="panel-title">
                    <a data-toggle="collapse" data-parent="#CriterioBusquedaPostulacion" href="#ColapsaBusqueda" aria-expanded="true" aria-controls="ColapsaBusqueda" class="fuente-seccion">
                        Búsqueda
                    </a>
                </h5>
            </div>

            
            <div id="ColapsaBusqueda" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="CabeceraColapsaBusqueda">
                <div class="panel-body">
                    <div class="col-md-6">
                        <div class="input-group fuente-pequeña">
                            <span class="input-group-addon">Palabra Clave</span>
                            @*<input type="text" id="filtroBusqueda" name="filtroBusqueda" class="form-control" placeholder="Palabra clave" />*@
                            @Html.TextBox("filtroBusqueda", "", new { @class = "form-control", @placeholder = "Palabra clave" })
                        </div>
                    </div>
                    <div class="col-md-6 fuente-pequeña">
                        @*<span class="col-md-6 btn-group">
                                <span class="fui" style="font-size:30px;">(</span>
                            </span>*@
                        <button id="btnBuscar" type="submit" class="btn btn-default fa fa-search color-paleta2"></button>
                    </div>

                </div>
            </div>
           

        </div>

    </div>


    <div id="divResultadoBusqueda">
        <label id="lblCargandoOfertas" style="visibility:hidden"></label>
    </div>
</div>
<script>
    $(document).ready(function () {

        buscarOfertas();

        $("#divFinalCabeceraEmpresa").removeClass("color-paleta1 color-paleta3 color-paleta4 color-paleta5").addClass("color-paleta2");

        $('#btnBuscar').on('click', function () {
            buscarOfertas();
        });

        function buscarOfertas()
        {
            $('#lblCargandoOfertas').css('visibility', 'visible');

            var palabraClave = $('#filtroBusqueda').val();
            var url = '@Url.Action("BuscarOfertas", "Empresa")' + "?palabraClave=" + palabraClave;

            $.get(url, function (data) {
                $('#divResultadoBusqueda').html(data);
            }).then(function () {
                $('#lblCargandoOfertas').css('visibility', 'hidden');
            });
        }
    });
</script>

