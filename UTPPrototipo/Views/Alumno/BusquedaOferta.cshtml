@model UTP.PortalEmpleabilidad.Modelo.Vistas.Ofertas.VistaOfertaAlumno

@{
    Layout = "~/Views/Alumno/_LayoutAlumno.cshtml";
    ViewBag.Title = "Búsqueda de Oferta";
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <div class="container" style="margin-top:2px;">
        @Html.Hidden("TipoBusqueda", 1)
        @{Html.RenderAction("VistaCabecera", "Alumno");}
        <div class="panel-group" id="CriterioBusquedaPostulacion" role="tablist" aria-multiselectable="true">
            <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="CabeceraColapsaBusqueda" style="padding: 2px 2px 2px 6px;">
                    <h5 class="panel-title">
                        <a data-toggle="collapse" data-parent="#CriterioBusquedaPostulacion" href="#ColapsaBusqueda" aria-expanded="true" aria-controls="ColapsaBusqueda" class="fuente-seccion">
                            Búsqueda
                        </a>
                    </h5>
                </div>
                <div id="ColapsaBusqueda" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="CabeceraColapsaBusqueda">
                    <div class="panel-body fuente-pequeña">
                        <div class="row">
                            <div class="col-sm-10">
                                <div class="input-group">
                                    <span class="input-group-addon fuente-pequeña">Palabra Clave</span>
                                    @Html.TextBoxFor(model => model.PalabraClave, new { @class = "form-control", @placeholder = "Palabra clave" })
                                </div>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-default color-paleta3 fa fa-2x fa-search" id="buscar"></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="CabeceraColapsaBusquedaAvanzada" style="padding: 2px 2px 2px 6px;">
                    <h5 class="panel-title">
                        <a class="collapsed fuente-seccion" data-toggle="collapse" data-parent="#CriterioBusquedaPostulacion" href="#ColapsaBusquedaAvanzada" aria-expanded="false" aria-controls="ColapsaBusquedaAvanzada">
                            Búsqueda avanzada
                        </a>
                    </h5>
                </div>
                <div id="ColapsaBusquedaAvanzada" class="panel-collapse collapse" role="tabpanel" aria-labelledby="CabeceraColapsaBusquedaAvanzada">
                    <div class="panel-body fuente-pequeña">
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="input-group">
                                    <span class="input-group-addon">Publicado</span>
                                    @Html.DropDownListFor(model => model.IdPeriodoPublicacion, new SelectList(ViewBag.PeriodoPublicacion, "Value", "Text"), "- Seleccionar -", new { @class = "form-control", @Id = "IdPeriodoPublicacion" })
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon">Carrera</span>
                                    @Html.DropDownListFor(model => model.IdEstudio, new SelectList(ViewBag.ListaEstudios, "Value", "Text"), "- Seleccionar -", new { @class = "form-control" })
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon">Grado</span>
                                    @Html.DropDownListFor(model => model.IdEstadoEstudio, new SelectList(ViewBag.ListaEstadoEstudio, "Value", "Text"), "- Seleccionar -", new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="input-group">
                                    <span class="input-group-addon">Sector</span>
                                    @Html.DropDownListFor(model => model.IdSectorEmpresarial, new SelectList(ViewBag.ListaSectorEmpresarial, "Value", "Text"), "- Seleccionar -", new { @class = "form-control" })
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon">Área</span>
                                    @*<input type="text" class="form-control" placeholder="Área en la empresa">*@
                                    @Html.TextBoxFor(model => model.AreaEmpresa, new { @class = "form-control", @placeholder = "Área en la empresa" })
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon">Experiencia</span>
                                    @*<input type="text" class="form-control" placeholder="Años de experiencia">*@
                                    @Html.TextBoxFor(model => model.AniosExperiencia, new { @class = "form-control", @placeholder = "Años de experiencia" })
                                </div>

                            </div>
                            <div class="col-sm-3">
                                <div class="input-group">
                                    <span class="input-group-addon">Tipo</span>
                                    @Html.DropDownListFor(model => model.IdTipoTrabajo, new SelectList(ViewBag.ListaTipoTrabajo, "Value", "Text"), "- Seleccionar -", new { @class = "form-control" })
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon">Contrato</span>
                                    @Html.DropDownListFor(model => model.IdContrato, new SelectList(ViewBag.ListaContrato, "Value", "Text"), "- Seleccionar -", new { @class = "form-control" })
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon">Cargo</span>
                                    @Html.DropDownListFor(model => model.IdTipoCargo, new SelectList(ViewBag.ListaTipoCargo, "Value", "Text"), "- Seleccionar -", new { @class = "form-control" })
                                </div>

                            </div>

                            <div class="col-sm-3">

                                <div class="input-group">
                                    <span class="input-group-addon">Sueldo</span>
                                    @Html.TextBoxFor(model => model.Sueldo, new { @class = "form-control", @placeholder = "Sueldo ofrecido" })
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon">Ubicación</span>
                                    @Html.TextBoxFor(model => model.Ubicacion, new { @class = "form-control", @id = "Ubicacion", @placeholder = "Ubicación del trabajo" })
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon">
                                        @Html.CheckBoxFor(model => model.IncluirMensaje, new { @id = "IncluirMensaje" })
                                    </span>
                                    <span class="form-control" style="padding-top:8px;">Con mensajes para mi</span>
                                </div>
                                <br />
                                <button class="btn btn-default color-paleta3 fa fa-2x fa-search" id="buscaravanzada"></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="resultadobusqueda">

        </div>

    </div>

    <div class="modal" id="Modal-datos-empresa" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    </div>
}
<script src="~/Scripts/jquery-2.1.1.min.js"></script>

<script>

    $(document).ready(function () {
        $("#divFinalCabecera").removeClass("color-paleta1 color-paleta2 color-paleta4 color-paleta5").addClass("color-paleta3");
    });
    $('#buscar').click(function () {
        $("#TipoBusqueda").attr('value', 1);
        var oferta = {
            PalabraClave: $('#PalabraClave').val(),
            IdAlumno: $('#IdAlumno').val(),
            PaginaActual: 1,
            NumeroRegistros: parseInt($("#PagOfertas").val())

        };
        Cargar("resultadobusqueda", "/Alumno/BusquedaSimpleOferta", oferta);
    });
    $('#buscaravanzada').click(function () {
        $("#TipoBusqueda").attr('value', 2);
        var oferta = {
            IdPeriodoPublicacion: $('#IdPeriodoPublicacion').val(),
            IdEstudio: $('#IdEstudio').val(),
            IdEstadoEstudio: $('#IdEstadoEstudio').val(),
            IdSectorEmpresarial: $('#IdSectorEmpresarial').val(),
            AreaEmpresa: $('#AreaEmpresa').val(),
            AniosExperiencia: $('#AniosExperiencia').val(),
            IdTipoTrabajo: $('#IdTipoTrabajo').val(),
            IdContrato: $('#IdContrato').val(),
            IdTipoCargo: $('#IdTipoCargo').val(),
            Sueldo: $('#Sueldo').val(),
            Ubicacion: $('#Ubicacion').val(),
            IncluirMensaje: $('#IncluirMensaje:checked').val(),
            IdAlumno: $('#IdAlumno').val(),
            PaginaActual: 1,
            NumeroRegistros: parseInt($("#PagOfertas").val())

        };
        Cargar("resultadobusqueda", "/Alumno/BusquedaAvanzadaOferta", oferta);
    });

    function Cargar(id, link, entidad) {
        $.ajax({
            url: link,
            contentType: 'application/json; charset=utf-8',
            type: 'POST',
            data: JSON.stringify(entidad),
            dataType: 'html'
        })
        .success(function (result) {
            $("#" + id).html(result);
        })
        .error(function (xhr, status) {
            console.log(xhr);
            console.log(status);

        })
    }


</script>



